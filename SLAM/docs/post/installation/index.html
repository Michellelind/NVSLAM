<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="
		Goals, objectives and approach
		"> 
    
	<meta name="author" content=" map[] ">  
    <base href="https://zxcvbnmditto.github.io/D-SLAM/">
    <title>Installation</title>

    
    <link href="css/bootstrap.min.css" rel="stylesheet">

    
    <link href="css/landing-page.css" rel="stylesheet">

    
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    
    <link href="css/bootstrap-social.css" rel="stylesheet">

    
    
    

    <style>
    .navbar {
    border-color: #e7e7e7;
}

.content-section-a,
footer,
.navbar {
  background-color: #f8f8f8;
  color: #333;
}

.navbar a:link,
.navbar-default .navbar-nav>li>a {
  color: #777;
}

.navbar a:hover,
.navbar-default .navbar-nav>li>a:hover {
  color: rgb(51, 51, 51);
}

.content-section-b {
  background-color: white;
  color: #333;
}

body {
  color: rgb(51, 51, 51);
}

.header-container h1,
.header-container h2,
.header-container h3,
.header-container h4 {
  color: rgb(51, 51, 51);
}
 
  </style>

</head>
<body>


<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        
        <div class="navbar-header page-scroll" style="margin-left: -15px;">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" style="margin-right: 0px;">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
				<span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" style="padding-left: 0px;margin-left: 0px;" href="#intro">
            D-SLAM</a>
        </div>
        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll" href="#overview">
                        Overview
                    </a>
                </li>
                <li>
                    <a class="page-scroll" href="#installation">
                        Installation
                    </a>
                </li>
                <li>
                    <a class="page-scroll" href="#build&run">
                        Build & Run
                    </a>
                </li>
                <li>
                    <a class="page-scroll" href="#demo">
                        Demo
                    </a>
                </li>
                <li>
                    <a class="page-scroll" href="#conclusion">
                        Conclusion
                    </a>
                </li>
                <li>
                    <a class="page-scroll" href="#license">
                        License
                    </a>
                </li>
				 
				 
            </ul>
        </div>
        
    </div>
    
</nav>


<section id="services">
   <div class="content-section-a">

      <div class="container">

        <div class="row">
          <div>
            <hr class="section-heading-spacer">
            <div class="clearfix"></div>
            <h2 class="section-heading">Installation</h2>
            <h1 id="installation">Installation</h1>
<p>This section is dedicated to guide the process of installing D-SLAM and all its dependencies on both x86 (Docker) and NVIDIA Jetson TX2.</p>
<h3 id="environment">Environment</h3>
<p>The following is a quick overview between the environments that D-SLAM was built and tested on. Note that it is very possible to introduce dependencies issue during compilation if using libraries with different version, especially on a Jetson TX2.</p>
<table>
<thead>
<tr>
<th></th>
<th>Docker</th>
<th>Jetson TX2</th>
<th>Recomemnd</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cuda</td>
<td>10.2</td>
<td>10.0</td>
<td>10.0</td>
</tr>
<tr>
<td>Cudnn</td>
<td>7.6.5</td>
<td>7.6.3</td>
<td>7.6.0</td>
</tr>
<tr>
<td>OpenCV</td>
<td>4.2.0</td>
<td>4.1.1</td>
<td>4.0.0</td>
</tr>
<tr>
<td>Pytorch</td>
<td>1.4.0</td>
<td>1.4.0</td>
<td>1.4.0</td>
</tr>
<tr>
<td>Torchvision</td>
<td>0.5.0</td>
<td>0.5.0</td>
<td>0.5.0</td>
</tr>
</tbody>
</table>
<p>The following is a list of other dependencies:</p>
<ul>
<li>Eigen</li>
<li>Pangolin</li>
<li>OpenGL</li>
<li>Numpy</li>
<li>Matplotlib</li>
<li>ORBSLAM2</li>
<li>Monodepth2</li>
</ul>
<h3 id="docker-setup">Docker Setup</h3>
<p>D-SLAM provides a Dockerfile to install all the dependencies needed within a docker image. You can use the provided <code>env.sh</code> script to build and restart the built container easily.</p>
<p> </p>
<p>First Time Setup:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Built the docker image</span>
<span style="color:#f92672">(</span>host<span style="color:#f92672">)</span> ./env.sh build <span style="color:#75715e"># Img size ~ 13GB, takes a long time</span>
<span style="color:#75715e"># Built the docker container</span>
<span style="color:#f92672">(</span>host<span style="color:#f92672">)</span> ./env.sh run
</code></pre></div><p>After Setup:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Restart the container created previously</span>
<span style="color:#f92672">(</span>host<span style="color:#f92672">)</span> ./env.sh
</code></pre></div><p>For more details and custumization, checkout</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">├──Docker/
    ├── Dockerfile
    └── requirements.txt
├── env.sh
</code></pre></div><h3 id="tx2-setup">TX2 Setup</h3>
<p>D-SLAM installs all the librabries directly on the TX2 without using a Docker container. Again, the installation process has been simplied with the provided install scripts under <code>install_tx2/</code>.</p>
<p> </p>
<p>First Time Setup:</p>
<ol>
<li>
<p>(Optional but Highly Recommended) Reflash the Jetson TX2 from scratch. You will need to download NVIDIA JetPack 4.3 from <a href="https://docs.nvidia.com/sdk-manager/install-with-sdkm-jetson/index.html">here</a> for a fresh reflash. You can follow this <a href="https://docs.nvidia.com/sdk-manager/install-with-sdkm-jetson/index.html">tutorial</a> to learn more details about the reflashing process.</p>
</li>
<li>
<p>Install the required dependencies using the provided scripts</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd install_tx2
./eigen.sh
./pangolin.sh
./orbslam2.sh
./monodepth2.sh
./pytorch.sh
</code></pre></div></li>
<li>
<p>Compile Pytorch and Libtorch from scratch. You <strong>Will</strong> experience runtime error if you don&rsquo;t compile those from source. (Very time consuming process)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/pytorch/pytorch.git ~/VSLAM-2020/ThirdParty/pytorch
cd  ~/VSLAM-2020/ThirdParty/pytorch

<span style="color:#75715e"># Install v1.4.0</span>
git checkout v1.4.0
sudo pip3 install -r requirements.txt
git submodule update --init --recursive

<span style="color:#75715e"># Turn on to max mode for slight performance increase for compilation</span>
sudo nvpmodel -m <span style="color:#ae81ff">0</span>
sudo jetson_clocks.sh

<span style="color:#75715e"># Apply following changes before continue (Very Important !!!!!!)</span>
<span style="color:#75715e"># CmakeLists.txt : Change NCCL to &#39;Off&#39; on line 148</span>
<span style="color:#75715e"># setup.py: Add cmake_cache_vars[&#39;USE_NCCL&#39;] = False below line 397</span>
sudo python3 setup.py develop

<span style="color:#75715e"># Libtorch</span>
cd /build
sudo python3 ../tools/build_libtorch.py
</code></pre></div></li>
<li>
<p>If for any reason you only need pytorch but not libtorch. Here is a simple, much faster alternative using pre-compiled wheels by NVIDIA.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Get precompiled pytorch wheel for TX2</span>
wget https://nvidia.box.com/shared/static/ncgzus5o23uck9i5oth2n8n06k340l6k.whl -O torch-1.4.0-cp36-cp36m-linux_aarch64.whl

<span style="color:#75715e"># Install dependencies</span>
sudo apt-get install python3-pip libopenblas-base
sudo -H pip3 install Cython numpy torch-1.4.0-cp36-cp36m-linux_aarch64.whl

rm torch-1.4.0-cp36-cp36m-linux_aarch64.whl
</code></pre></div></li>
</ol>
<p>For more details about the installation process, checkout</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">├──install_tx2/
    ├── eigen.sh
    ├── monodepth2.sh
    ├── orbslam2.sh
    ├── pangolin.sh
    └── pytorch.sh
</code></pre></div><h3 id="remote-control-setup">Remote Control Setup</h3>
<p>TX2:​</p>
<ol>
<li>
<p>Install desktop sharing if it is not installed</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install -y vino
</code></pre></div></li>
<li>
<p>Turn on the desktop sharing in ubuntu control center</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">unity-control-center
</code></pre></div><p>If encountered <a href="https://bugs.launchpad.net/ubuntu/+source/unity-control-center/+bug/1741027"><strong>Screen sharing panels abort using an non-existent vino gsettings key</strong></a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo nano /usr/share/glib-2.0/schemas/org.gnome.Vino.gschema.xml
</code></pre></div><p>Add the following key:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;key name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;enabled&#39;</span> type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;b&#39;</span>&gt;
    &lt;summary&gt;Enable remote access to the desktop&lt;/summary&gt;
    &lt;description&gt;
    If true, allows remote access to the desktop via the RFB
    protocol. Users on remote machines may <span style="color:#66d9ef">then</span> connect to the
    desktop using a VNC viewer.
    &lt;/description&gt;
    &lt;default&gt;false&lt;/default&gt;
&lt;/key&gt;
</code></pre></div><p>Compile the schemas for Gnome:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo glib-compile-schemas /usr/share/glib-2.0/schemas
</code></pre></div></li>
</ol>
<p>Remote computer:</p>
<ol>
<li>Install remmina if it is not installed
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-add-repository ppa:remmina-ppa-team/remmina-next
sudo apt update
sudo apt install remmina remmina-plugin-rdp remmina-plugin-secret
</code></pre></div></li>
</ol>

        </div>
    </div>

</div>
</div>

</section>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-8" style="padding-left: 0px; width:100%">
				<ul class="list-inline">
					<li>
						<a class="page-scroll" href="#intro">Up</a>
					</li>
					
					
				 </ul>
				 <p class="copyright text-muted small" style="text-align:left;">
                    Copyright &copy; D-SLAM All Rights Reserved 
                        </br>Built with <a href="http://gohugo.io">Hugo</a> and the <a href="https://github.com/cdeck3r/OneDly-Theme">OneDly project</a> theme.
                 </p>
			</div>
            
        </div>
    </div>
</footer>

<script src="js/jquery-1.11.0.js"></script>


<script src="js/jquery.easing.min.js"></script>


<script src="js/bootstrap.min.js"></script>



</body>
</html>

