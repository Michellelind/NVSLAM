<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="
		
		A RGB-D SLAM based on ORBSLAM2 &amp; Monodepth2
		"> 
    
	<meta name="author" content=" map[] ">  
    <base href="https://zxcvbnmditto.github.io/D-SLAM/">
    <title>Tags</title>

    
    <link href="css/bootstrap.min.css" rel="stylesheet">

    
    <link href="css/landing-page.css" rel="stylesheet">

    
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    
    <link href="css/bootstrap-social.css" rel="stylesheet">

    
    
    

    <style>
    .navbar {
    border-color: #e7e7e7;
}

.content-section-a,
footer,
.navbar {
  background-color: #f8f8f8;
  color: #333;
}

.navbar a:link,
.navbar-default .navbar-nav>li>a {
  color: #777;
}

.navbar a:hover,
.navbar-default .navbar-nav>li>a:hover {
  color: rgb(51, 51, 51);
}

.content-section-b {
  background-color: white;
  color: #333;
}

body {
  color: rgb(51, 51, 51);
}

.header-container h1,
.header-container h2,
.header-container h3,
.header-container h4 {
  color: rgb(51, 51, 51);
}
 
  </style>

</head>
<body>

<section id="intro">
	
	<div class="intro-header">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            
            <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
            </ol>

            
            <div class="carousel-inner">
            <div class="item active">
                <img src="01.png" alt="Los Angeles" style="width:100%;">
            </div>

            <div class="item">
                <img src="02.png" alt="Chicago" style="width:100%;">
            </div>

            <div class="item">
                <img src="03.png" alt="New york" style="width:100%;">
            </div>
            </div>

            
            <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#myCarousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

		<div class="container">
            <div class="row">
                <div class="col-lg-12">
                
                    <div class="intro-message">
                        <h1>D-SLAM</h1>
                        <h3>A RGB-D SLAM based on ORBSLAM2 &amp; Monodepth2</h3>
                        <hr class="intro-divider">

                        <ul class="list-inline intro-social-buttons">
                        


  <li><a href="//github.com/zxcvbnmditto/D-SLAM" class="btn btn-default btn-lg" title="GitHub">
  <i class="fa fa-github"></i>
  </a></li>

















































































                        </ul>
                    </div>
                </div>
            </div>
		</div>
		
	</div>
	

</section>

<section id="main">



	 
    <div class="content-section-a">
    
   
        <div class="container">

            <div class="row">
                <div>
                    
                    
                    <!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="overview">Overview</h1>
<p>D-SLAM is a Visual SLAM system using monocular RGB inputs and estimated depth inputs to construct a 3D mapping. The goal of this project is to create a well-performing SLAM system under contrained resources setup while aiming for real-time performance. The D-SLAM system can supports stream of RGB images either from disk or camera.</p>
<p> </p>
<p>D-SLAM is based on MonoDepth2 depth estimator and ORB-SLAM2 system, and it be <strong>trained</strong> and <strong>evaluated</strong> with monocular RGB image stream without collecting additional image stream, or depth information from sensor.</p>
<p> </p>
<p>D-SLAM is evaluated on the <a href="http://www.cvlibs.net/datasets/kitti/eval_odometry.php">KITTI dataset</a>. We have also run a real-world experiment with NVIDIA Jetson TX2 showing that D-SLAM was able to detect loops and relocalize camera in real time.</p>

                </div>
            </div>

        </div>
        

    </div>

	
    <div class="content-section-b">
    
   
        <div class="container">

            <div class="row">
                <div>
                    
                    
                    <h1 id="installation">Installation</h1>
<p>This section is dedicated to guide the process of installing D-SLAM and all its dependencies on both x86 (Docker) and NVIDIA Jetson TX2.</p>
<h3 id="environment">Environment</h3>
<p>The following is a quick overview between the environments that D-SLAM was built and tested on. Note that it is very possible to introduce dependencies issue during compilation if using libraries with different version, especially on a Jetson TX2.</p>
<table class='table table-striped table-hover'>
<thead>
<tr>
<th></th>
<th>Docker</th>
<th>Jetson TX2</th>
<th>Recomemnd</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cuda</td>
<td>10.2</td>
<td>10.0</td>
<td>10.0</td>
</tr>
<tr>
<td>Cudnn</td>
<td>7.6.5</td>
<td>7.6.3</td>
<td>7.6.0</td>
</tr>
<tr>
<td>OpenCV</td>
<td>4.2.0</td>
<td>4.1.1</td>
<td>4.0.0</td>
</tr>
<tr>
<td>Pytorch</td>
<td>1.4.0</td>
<td>1.4.0</td>
<td>1.4.0</td>
</tr>
<tr>
<td>Torchvision</td>
<td>0.5.0</td>
<td>0.5.0</td>
<td>0.5.0</td>
</tr>
</tbody>
</table>
<p>The following is a list of other dependencies:</p>
<ul>
<li>Eigen</li>
<li>Pangolin</li>
<li>OpenGL</li>
<li>Numpy</li>
<li>Matplotlib</li>
<li>ORBSLAM2</li>
<li>Monodepth2</li>
</ul>
<h3 id="docker-setup">Docker Setup</h3>
<p>D-SLAM provides a Dockerfile to install all the dependencies needed within a docker image. You can use the provided <code>env.sh</code> script to build and restart the built container easily.</p>
<p> </p>
<p>First Time Setup:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Built the docker image</span>
<span style="color:#f92672">(</span>host<span style="color:#f92672">)</span> ./env.sh build <span style="color:#75715e"># Img size ~ 13GB, takes a long time</span>
<span style="color:#75715e"># Built the docker container</span>
<span style="color:#f92672">(</span>host<span style="color:#f92672">)</span> ./env.sh run
</code></pre></div><p>After Setup:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Restart the container created previously</span>
<span style="color:#f92672">(</span>host<span style="color:#f92672">)</span> ./env.sh
</code></pre></div><p>For more details and custumization, checkout</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">├──Docker/
    ├── Dockerfile
    └── requirements.txt
├── env.sh
</code></pre></div><h3 id="tx2-setup">TX2 Setup</h3>
<p>D-SLAM installs all the librabries directly on the TX2 without using a Docker container. Again, the installation process has been simplied with the provided install scripts under <code>install_tx2/</code>.</p>
<p> </p>
<p>First Time Setup:</p>
<ol>
<li>
<p>(Optional but Highly Recommended) Reflash the Jetson TX2 from scratch. You will need to download NVIDIA JetPack 4.3 from <a href="https://docs.nvidia.com/sdk-manager/install-with-sdkm-jetson/index.html">here</a> for a fresh reflash. You can follow this <a href="https://docs.nvidia.com/sdk-manager/install-with-sdkm-jetson/index.html">tutorial</a> to learn more details about the reflashing process.</p>
</li>
<li>
<p>Install the required dependencies using the provided scripts</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd install_tx2
./eigen.sh
./pangolin.sh
./orbslam2.sh
./monodepth2.sh
./pytorch.sh
</code></pre></div></li>
<li>
<p>Compile Pytorch and Libtorch from scratch. You <strong>Will</strong> experience runtime error if you don&rsquo;t compile those from source. (Very time consuming process)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/pytorch/pytorch.git ~/VSLAM-2020/ThirdParty/pytorch
cd  ~/VSLAM-2020/ThirdParty/pytorch

<span style="color:#75715e"># Install v1.4.0</span>
git checkout v1.4.0
sudo pip3 install -r requirements.txt
git submodule update --init --recursive

<span style="color:#75715e"># Turn on to max mode for slight performance increase for compilation</span>
sudo nvpmodel -m <span style="color:#ae81ff">0</span>
sudo jetson_clocks.sh

<span style="color:#75715e"># Apply following changes before continue (Very Important !!!!!!)</span>
<span style="color:#75715e"># CmakeLists.txt : Change NCCL to &#39;Off&#39; on line 148</span>
<span style="color:#75715e"># setup.py: Add cmake_cache_vars[&#39;USE_NCCL&#39;] = False below line 397</span>
sudo python3 setup.py develop

<span style="color:#75715e"># Libtorch</span>
cd /build
sudo python3 ../tools/build_libtorch.py
</code></pre></div></li>
<li>
<p>If for any reason you only need pytorch but not libtorch. Here is a simple, much faster alternative using pre-compiled wheels by NVIDIA.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Get precompiled pytorch wheel for TX2</span>
wget https://nvidia.box.com/shared/static/ncgzus5o23uck9i5oth2n8n06k340l6k.whl -O torch-1.4.0-cp36-cp36m-linux_aarch64.whl

<span style="color:#75715e"># Install dependencies</span>
sudo apt-get install python3-pip libopenblas-base
sudo -H pip3 install Cython numpy torch-1.4.0-cp36-cp36m-linux_aarch64.whl

rm torch-1.4.0-cp36-cp36m-linux_aarch64.whl
</code></pre></div></li>
</ol>
<p>For more details about the installation process, checkout</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">├──install_tx2/
    ├── eigen.sh
    ├── monodepth2.sh
    ├── orbslam2.sh
    ├── pangolin.sh
    └── pytorch.sh
</code></pre></div><h3 id="remote-control-setup">Remote Control Setup</h3>
<p>TX2:​</p>
<ol>
<li>
<p>Install desktop sharing if it is not installed</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install -y vino
</code></pre></div></li>
<li>
<p>Turn on the desktop sharing in ubuntu control center</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">unity-control-center
</code></pre></div><p>If encountered <a href="https://bugs.launchpad.net/ubuntu/+source/unity-control-center/+bug/1741027"><strong>Screen sharing panels abort using an non-existent vino gsettings key</strong></a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo nano /usr/share/glib-2.0/schemas/org.gnome.Vino.gschema.xml
</code></pre></div><p>Add the following key:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;key name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;enabled&#39;</span> type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;b&#39;</span>&gt;
    &lt;summary&gt;Enable remote access to the desktop&lt;/summary&gt;
    &lt;description&gt;
    If true, allows remote access to the desktop via the RFB
    protocol. Users on remote machines may <span style="color:#66d9ef">then</span> connect to the
    desktop using a VNC viewer.
    &lt;/description&gt;
    &lt;default&gt;false&lt;/default&gt;
&lt;/key&gt;
</code></pre></div><p>Compile the schemas for Gnome:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo glib-compile-schemas /usr/share/glib-2.0/schemas
</code></pre></div></li>
</ol>
<p>Remote computer:</p>
<ol>
<li>Install remmina if it is not installed
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-add-repository ppa:remmina-ppa-team/remmina-next
sudo apt update
sudo apt install remmina remmina-plugin-rdp remmina-plugin-secret
</code></pre></div></li>
</ol>

                </div>
            </div>

        </div>
        

    </div>

	 
    <div class="content-section-a">
    
   
        <div class="container">

            <div class="row">
                <div>
                    
                    
                    <h1 id="build--run">Build &amp; Run</h1>
<h3 id="kitti-data-preparation">KITTI Data preparation</h3>
<p>This part is exclusive for running the disk demo. You can <a href="#overview">skip</a> if you are only interested in the camera demo.</p>
<p>Download the <a href="http://www.cvlibs.net/datasets/kitti/eval_odometry.php">KITTI Odometry rgb dataset</a>. You will need the rgb one to run our VSLAM.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir -p &lt;path-to-project-root&gt;/data

<span style="color:#75715e"># Download KITTI Odometry grayscale</span>
wget http://www.cvlibs.net/download.php?file<span style="color:#f92672">=</span>data_odometry_rgb.zip
unzip data_odometry_rgb.zip
rm data_odometry_rgb.zip                          <span style="color:#75715e"># Remove zip if desired</span>
mv dataset kitti-rgb-odometry                     <span style="color:#75715e"># Rename Directory</span>
mv kitti-rgb-odometry &lt;path-to-project-root&gt;/data <span style="color:#75715e"># Move Directory</span>
</code></pre></div><p>Rename Kitti images with timestamps with the provided scripts.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd  &lt;path-to-project-root&gt;/scripts
<span style="color:#75715e"># Follow the prompt for args</span>
./kitti_rename_timestamp.sh
</code></pre></div><h3 id="build">Build</h3>
<p>Compile ORBSLAM2</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd &lt;path-to-orbslam2&gt;
./build.sh
</code></pre></div><p>Compile D-SLAM</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir build <span style="color:#f92672">&amp;&amp;</span> cd build

<span style="color:#75715e"># Build on Docker</span>
cmake -D Torch_DIR<span style="color:#f92672">=</span>../ThirdParty/libtorch/share/cmake/Torch .. <span style="color:#f92672">&amp;&amp;</span> make -j
<span style="color:#75715e"># Build on TX2</span>
cmake -D Torch_DIR<span style="color:#f92672">=</span>../ThirdParty/pytorch/share/cmake/Torch .. <span style="color:#f92672">&amp;&amp;</span> make -j
</code></pre></div><p>Generate Pre-trained Monodepth2 Model for D-SLAM</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Download the models from [Monodepth2](https://github.com/nianticlabs/monodepth2) and place it under &lt;path-to-project-root&gt;/models</span>

<span style="color:#75715e"># Replace following monodepth2 source files with the provided ones</span>
rm  &lt;path-to-project-root&gt;/ThirdParty/monodepth2/networks/depth_decoder.py
rm  &lt;path-to-project-root&gt;/ThirdParty/monodepth2/networks/resnet_encoder.py
cp  &lt;path-to-project-root&gt;/others/* &lt;path-to-project-root&gt;/ThirdParty/monodepth2/networks

cd scripts
<span style="color:#75715e"># Follow the prompt for args</span>
./torchscript_converter.sh
</code></pre></div><h3 id="run">Run</h3>
<p>We have provided scripts to run the demo presented.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Disk Demo</span>
<span style="color:#75715e"># Usage: mono_slam_disk_demo.sh &lt;ENV&gt; &lt;SEQUENCE_NUMBER&gt; &lt;DEPTH_MODEL_NAME&gt; &lt;YAML&gt;</span>
./mono_slam_disk_demo.sh docker <span style="color:#ae81ff">00</span> mono_640x192 KITTI00-02.yaml <span style="color:#75715e"># Replace docker with TX2 depends on your env</span>

<span style="color:#75715e"># Camera</span>
<span style="color:#75715e"># Usage: mono_slam_camera_demo.sh &lt;ENV&gt; &lt;DEPTH_MODEL_NAME&gt; &lt;YAML&gt;</span>
./mono_slam_camera_demo.sh docker mono_640x192 KITTI_CAM.yaml
</code></pre></div><p>To run and view real-time result on TX2.</p>
<ol>
<li>
<p>ssh into the TX2 with the remote computer</p>
</li>
<li>
<p>Run VNC through SSH and display the results on the VNC client</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export DISPLAY<span style="color:#f92672">=</span>:1 <span style="color:#f92672">&amp;&amp;</span> /usr/lib/vino/vino-server
</code></pre></div></li>
<li>
<p>Open remmina and set the connection with protocal VNC</p>
</li>
<li>
<p>Run the camera Demo</p>
</li>
</ol>

                </div>
            </div>

        </div>
        

    </div>

	
    <div class="content-section-b">
    
   
        <div class="container">

            <div class="row">
                <div>
                    
                    
                    <h1 id="demo">Demo</h1>
<h3 id="kitti-sequence-08">KITTI Sequence 08</h3>
<p>Coming Soon.</p>
<h3 id="jetson-tx2--uc-davis-kemper-hall">Jetson TX2 @ UC Davis Kemper Hall</h3>
<p>Coming Soon.</p>

                </div>
            </div>

        </div>
        

    </div>

	 
    <div class="content-section-a">
    
   
        <div class="container">

            <div class="row">
                <div>
                    
                    
                    <h1 id="conclusion">Conclusion</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam luctus lorem et erat blandit convallis. Curabitur venenatis mi sed risus egestas, vitae lobortis felis ultricies. Nulla facilisi. Vestibulum rhoncus tortor quis ex laoreet venenatis. Etiam vitae facilisis lectus. Suspendisse pellentesque consequat viverra. Pellentesque facilisis porta arcu in faucibus. Morbi convallis.</p>

                </div>
            </div>

        </div>
        

    </div>

	
    <div class="content-section-b">
    
   
        <div class="container">

            <div class="row">
                <div>
                    
                    
                    <h1 id="license">License</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam luctus lorem et erat blandit convallis. Curabitur venenatis mi sed risus egestas, vitae lobortis felis ultricies. Nulla facilisi. Vestibulum rhoncus tortor quis ex laoreet venenatis. Etiam vitae facilisis lectus. Suspendisse pellentesque consequat viverra. Pellentesque facilisis porta arcu in faucibus. Morbi convallis.</p>

                </div>
            </div>

        </div>
        

    </div>


</section>


<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-8" style="padding-left: 0px; width:100%">
				<ul class="list-inline">
					<li>
						<a class="page-scroll" href="#intro">Up</a>
					</li>
					
					
				 </ul>
				 <p class="copyright text-muted small" style="text-align:left;">
                    Copyright &copy; D-SLAM All Rights Reserved 
                        </br>Built with <a href="http://gohugo.io">Hugo</a> and the <a href="https://github.com/cdeck3r/OneDly-Theme">OneDly project</a> theme.
                 </p>
			</div>
            
        </div>
    </div>
</footer>

<script src="js/jquery-1.11.0.js"></script>


<script src="js/jquery.easing.min.js"></script>


<script src="js/bootstrap.min.js"></script>



</body>
</html>

